!function(e){"use strict";let o=function(e,o){e.find(".tmpcoder-compare-count").length>0&&0==e.find(".tmpcoder-compare-count").text()||e.find(".tmpcoder-compare-count").css("display","inline-flex"),e.hasClass("tmpcoder-compare-style-popup")&&(e.find(".tmpcoder-compare-toggle-btn").on("click",function(c){c.preventDefault(),o("body").addClass("tmpcoder-body-overflow-hidden"),e.find(".tmpcoder-compare-bg").removeClass("tmpcoder-compare-popup-hidden"),e.find(".tmpcoder-compare-popup").removeClass("tmpcoder-compare-fade-out").addClass("tmpcoder-compare-fade-in"),e.find(".tmpcoder-compare-bg").removeClass("tmpcoder-compare-fade-out").addClass("tmpcoder-compare-fade-in"),e.find(".tmpcoder-compare-popup-inner-wrap").html('<div class="tmpcoder-compare-loader-wrap"><div class="tmpcoder-double-bounce"><div class="tmpcoder-child tmpcoder-double-bounce1"></div><div class="tmpcoder-child tmpcoder-double-bounce2"></div></div></div>'),o.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{nonce:tmpcoder_plugin_script.nonce,action:"tmpcoder_get_page_content",tmpcoder_compare_page_id:tmpcoder_plugin_script.comparePageID},success:function(c){e.find(".tmpcoder-compare-popup-inner-wrap").html(c.data.content),widgetCompare(e),e.find(".tmpcoder-compare-remove").click(function(c){c.preventDefault();var d=o(this).data("product-id");o.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"remove_from_compare",product_id:d,nonce:tmpcoder_plugin_script.nonce},success:function(){changeActionTargetProductId(d),e.find('[data-product-id="'+d+'"]').remove(),e.find(".tmpcoder-compare-popup-inner-wrap").find(".tmpcoder-compare-remove").length>0?(e.find(".tmpcoder-compare-empty").addClass("tmpcoder-hidden-element"),e.find(".tmpcoder-compare-products").removeClass("tmpcoder-hidden-element")):(e.find(".tmpcoder-compare-products").addClass("tmpcoder-hidden-element"),e.find(".tmpcoder-compare-empty").removeClass("tmpcoder-hidden-element")),o(document).trigger("removed_from_compare")}})})},error:function(e,o,c){console.log(e.responseText)}})}),e.find(".tmpcoder-close-compare").click(function(c){e.find(".tmpcoder-compare-popup").removeClass("tmpcoder-compare-fade-in").addClass("tmpcoder-compare-fade-out"),e.find(".tmpcoder-compare-bg").removeClass("tmpcoder-compare-fade-in").addClass("tmpcoder-compare-fade-out"),setTimeout(function(){e.find(".tmpcoder-compare-bg").addClass("tmpcoder-compare-popup-hidden"),o("body").removeClass("tmpcoder-body-overflow-hidden")},600)}),e.find(".tmpcoder-compare-bg").click(function(c){if(!c.target.classList.value.includes("tmpcoder-compare-popup")&&!c.target.closest(".tmpcoder-compare-popup")){var d=o(this);e.find(".tmpcoder-compare-popup").removeClass("tmpcoder-compare-fade-in").addClass("tmpcoder-compare-fade-out"),e.find(".tmpcoder-compare-bg").removeClass("tmpcoder-compare-fade-in").addClass("tmpcoder-compare-fade-out"),setTimeout(function(){d.addClass("tmpcoder-compare-popup-hidden"),o("body").removeClass("tmpcoder-body-overflow-hidden")},600)}})),o.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"count_compare_items",nonce:tmpcoder_plugin_script.nonce},success:function(o){"none"==e.find(".tmpcoder-compare-count").css("display")&&0<o.compare_count?(e.find(".tmpcoder-compare-count").text(o.compare_count),e.find(".tmpcoder-compare-count").css("display","inline-flex")):(0==o.compare_count&&e.find(".tmpcoder-compare-count").css("display","none"),e.find(".tmpcoder-compare-count").text(o.compare_count))},error:function(e){console.log(e)}}),o(document).on("removed_from_compare",function(){o.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"update_mini_compare",product_id:actionTargetProductId,nonce:tmpcoder_plugin_script.nonce},success:function(o){e.find(".tmpcoder-compare-count").text(o.compare_count),0==o.compare_count?e.find(".tmpcoder-compare-count").css("display","none"):e.find(".tmpcoder-compare-count").css("display","inline-flex")}})}),o(document).on("added_to_compare",function(){o.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"update_mini_compare",product_id:actionTargetProductId,nonce:tmpcoder_plugin_script.nonce},success:function(o){e.find(".tmpcoder-compare-count").text(o.compare_count),e.find(".tmpcoder-compare-count").css("display","inline-flex")}})})};e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/tmpcoder-mini-compare-pro.default",o)})}(jQuery);