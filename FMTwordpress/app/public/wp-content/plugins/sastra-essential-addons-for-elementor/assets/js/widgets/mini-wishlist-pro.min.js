!function(i){"use strict";let t=function(i,t){function s(){i.find(".tmpcoder-wishlist-remove").on("click",function(s){s.preventDefault();var d=t(this).data("product-id");t.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"remove_from_wishlist",product_id:d,nonce:tmpcoder_plugin_script.nonce},success:function(){i.find('.tmpcoder-wishlist-product[data-product-id="'+d+'"]').remove(),changeActionTargetProductId(d),t(document).trigger("removed_from_wishlist")}})})}i.find(".tmpcoder-wishlist-count").length>0&&0==i.find(".tmpcoder-wishlist-count").text()||i.find(".tmpcoder-wishlist-count").css("display","inline-flex"),s();var d=new MutationObserver(function(i){s()});d.observe(i[0],{childList:!0,subtree:!0}),t.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"count_wishlist_items",nonce:tmpcoder_plugin_script.nonce},success:function(s){"none"==i.find(".tmpcoder-wishlist-count").css("display")&&0<s.wishlist_count?(i.find(".tmpcoder-wishlist-count").text(s.wishlist_count),i.find(".tmpcoder-wishlist-count").css("display","inline-flex")):(0==s.wishlist_count&&i.find(".tmpcoder-wishlist-count").css("display","none"),i.find(".tmpcoder-wishlist-count").text(s.wishlist_count));var d=i.find(".tmpcoder-wishlist-product"),e=d.map(function(){return t(this).data("product-id")}).get(),o=s.wishlist_items.filter(function(i){return!e.includes(i.product_id)}),c=s.wishlist_items.map(function(i){return i.product_id});d.each(function(){var i=t(this).data("product-id");c.includes(i)||t(this).remove()}),o.forEach(function(t){i.find(".tmpcoder-wishlist-products").append('<li class="tmpcoder-wishlist-product" data-product-id="'+t.product_id+'"><a class="tmpcoder-wishlist-product-img" href="'+t.product_url+'">'+t.product_image+'</a><div><a href="'+t.product_url+'">'+t.product_title+'</a><div class="tmpcoder-wishlist-product-price">'+t.product_price+'</div></div><span class="tmpcoder-wishlist-remove" data-product-id="'+t.product_id+'"></span></li>')})}}),t(document).on("added_to_wishlist",function(){t.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"update_mini_wishlist",product_id:actionTargetProductId,nonce:tmpcoder_plugin_script.nonce},success:function(t){0==i.find(".tmpcoder-wishlist-products").find("li[data-product-id="+t.product_id+"]").length&&i.find(".tmpcoder-wishlist-products").append('<li class="tmpcoder-wishlist-product" data-product-id="'+t.product_id+'"><a class="tmpcoder-wishlist-product-img" href="'+t.product_url+'">'+t.product_image+'</a><div><a href="'+t.product_url+'">'+t.product_title+'</a><div class="tmpcoder-wishlist-product-price">'+t.product_price+'</div></div><span class="tmpcoder-wishlist-remove" data-product-id="'+t.product_id+'"></span></li>'),i.find(".tmpcoder-wishlist-count").text(t.wishlist_count),i.find(".tmpcoder-wishlist-count").css("display","inline-flex")}})}),t(document).on("removed_from_wishlist",function(){i.find('.tmpcoder-wishlist-product[data-product-id="'+actionTargetProductId+'"]').remove(),t.ajax({url:tmpcoder_plugin_script.ajax_url,type:"POST",data:{action:"update_mini_wishlist",product_id:actionTargetProductId,nonce:tmpcoder_plugin_script.nonce},success:function(t){i.find(".tmpcoder-wishlist-count").text(t.wishlist_count),0==t.wishlist_count?i.find(".tmpcoder-wishlist-count").css("display","none"):i.find(".tmpcoder-wishlist-count").css("display","inline-flex")}})}),i.find(".tmpcoder-wishlist").css({display:"none"});var e=0!=i.find(".tmpcoder-wishlist-wrap").length?i.find(".tmpcoder-wishlist-wrap").data("animation"):600;t("body").on("click",function(t){t.target.classList.value.includes("tmpcoder-wishlist-wrap")||t.target.closest(".tmpcoder-wishlist-wrap")||t.target.classList.value.includes("tmpcoder-wishlist-inner-wrap")||t.target.closest(".tmpcoder-wishlist-inner-wrap")||(i.hasClass("tmpcoder-wishlist-slide")?i.find(".tmpcoder-wishlist").slideUp(e):i.find(".tmpcoder-wishlist").fadeOut(e))}),0!==i.hasClass("tmpcoder-wishlist-sidebar").length&&(t("#wpadminbar").length&&i.find(".tmpcoder-wishlist").css({"z-index":999999}),o(),i.find(".tmpcoder-wishlist").on("click",function(s){s.target.classList.value.includes("tmpcoder-wishlist-inner-wrap")||s.target.closest(".tmpcoder-wishlist-inner-wrap")||(i.find(".tmpcoder-wishlist-inner-wrap").addClass("tmpcoder-wishlist-slide-out"),i.find(".tmpcoder-wishlist-slide-out").css("animation-speed",e),i.find(".tmpcoder-wishlist").fadeOut(e),t("body").removeClass("tmpcoder-wishlist-sidebar-body"),setTimeout(function(){i.find(".tmpcoder-wishlist-inner-wrap").removeClass("tmpcoder-wishlist-slide-out"),i.find(".tmpcoder-wishlist").css({display:"none"})},e+100))})),i.find(".tmpcoder-wishlist").length&&(i.hasClass("tmpcoder-wishlist-sidebar")||i.hasClass("tmpcoder-wishlist-dropdown"))&&i.find(".tmpcoder-wishlist-toggle-btn").on("click",function(s){s.stopPropagation(),s.preventDefault(),"none"===i.find(".tmpcoder-wishlist").css("display")?(i.hasClass("tmpcoder-wishlist-slide")?i.find(".tmpcoder-wishlist").slideDown(e):i.find(".tmpcoder-wishlist").fadeIn(e),i.hasClass("tmpcoder-wishlist-sidebar")&&(i.find(".tmpcoder-wishlist").fadeIn(e),i.find(".tmpcoder-wishlist-inner-wrap").addClass("tmpcoder-wishlist-slide-in"),i.find(".tmpcoder-wishlist-slide-in").css("animation-speed",e),t("body").addClass("tmpcoder-wishlist-sidebar-body")),setTimeout(function(){i.find(".tmpcoder-wishlist").removeClass("tmpcoder-wishlist-slide-in"),i.hasClass("tmpcoder-wishlist-sidebar")&&i.find(".tmpcoder-wishlist").trigger("resize")},e+100)):i.hasClass("tmpcoder-wishlist-slide")?i.find(".tmpcoder-wishlist").slideUp(e):i.find(".tmpcoder-wishlist").fadeOut(e)});var d=new MutationObserver(function(s){0!==i.hasClass("tmpcoder-wishlist-sidebar").length&&o(),i.find(".tmpcoder-wishlist-product").on("click",".tmpcoder-wishlist-remove",function(){t(this).closest("li").addClass("tmpcoder-before-remove-from-wishlist")}),0!==i.find(".tmpcoder-wishlist-product").length?(i.find(".tmpcoder-wishlist-empty").addClass("tmpcoder-wishlist-empty-hidden"),i.find(".tmpcoder-view-wishlist").removeClass("tmpcoder-hidden-element")):(i.find(".tmpcoder-wishlist-empty").removeClass("tmpcoder-wishlist-empty-hidden"),i.find(".tmpcoder-view-wishlist").addClass("tmpcoder-hidden-element"))});function o(){i.find(".tmpcoder-close-wishlist span").on("click",function(s){i.find(".tmpcoder-wishlist-inner-wrap").addClass("tmpcoder-wishlist-slide-out"),i.find(".tmpcoder-wishlist-slide-out").css("animation-speed",e),i.find(".tmpcoder-wishlist").fadeOut(e),t("body").removeClass("tmpcoder-wishlist-sidebar-body"),setTimeout(function(){i.find(".tmpcoder-wishlist-inner-wrap").removeClass("tmpcoder-wishlist-slide-out"),i.find(".tmpcoder-wishlist").css({display:"none"})},e+100)})}d.observe(i[0],{childList:!0,subtree:!0})};i(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/tmpcoder-mini-wishlist-pro.default",t)})}(jQuery);