!function(t){"use strict";let e=function(t,e){var n=jQuery(".woocommerce .tmpcoder-quantity-wrapper"),i=n.find("input.qty").attr("max")?n.find("input.qty").attr("max"):99999999,a=t.find(".tmpcoder-product-add-to-cart").attr("layout-settings"),o=(t.find(".tmpcoder-add-to-cart-icons-wrap"),t.find(".tmpcoder-add-to-cart-icons-wrap").length?"first-child":"last-child"),r=t.find(".tmpcoder-add-to-cart-icons-wrap").length?"last-child":"first-child";t.find("input.qty").each(function(){e(this).val()||e(this).val(0)}),t.find(".variations").find("select").on("change",function(){var n=!1;t.find(".variations").find("select").each(function(){"choose an option"!==e(this).find("option:selected").text().toLowerCase()&&(n=!0)}),!1==n?t.find(".reset_variations").css("display","none"):t.find(".reset_variations").css("display","inline-block")}),"default"!==a&&n.find("input.qty").attr("type","text").removeAttr("step").removeAttr("min").removeAttr("max"),n.on("click","i:"+o,function(){parseInt(jQuery(this).prev(".quantity").find("input.qty").val(),10)<i&&"both"==a?(0==parseInt(jQuery(this).prev(".quantity").find("input.qty").val(),10)&&jQuery(".single_add_to_cart_button").removeAttr("style"),jQuery(this).prev(".quantity").find("input.qty").val(parseInt(jQuery(this).prev(".quantity").find("input.qty").val(),10)+1),jQuery('input[name="update_cart"]').removeAttr("disabled")):parseInt(jQuery(this).parent().siblings(".quantity").find("input.qty").val(),10)<i&&"both"!==a&&"default"!==a&&(jQuery(this).parent().siblings(".quantity").find("input.qty").val(parseInt(jQuery(this).parent().siblings(".quantity").find("input.qty").val(),10)+1),jQuery('input[name="update_cart"]').removeAttr("disabled"),1>jQuery(this).parent().siblings(".quantity").find("input.qty").val()?(jQuery(".single_add_to_cart_button").css("pointer-events","none"),jQuery(".single_add_to_cart_button").css("opacity","0.5")):jQuery(".single_add_to_cart_button").removeAttr("style"))}),n.on("click","i:"+r,function(){parseInt(jQuery(this).next(".quantity").find("input.qty").val(),10)>1&&"both"==a?(jQuery(this).next(".quantity").find("input.qty").val(parseInt(jQuery(this).next(".quantity").find("input.qty").val(),10)-1),jQuery('input[name="update_cart"]').removeAttr("disabled")):parseInt(jQuery(this).parent().siblings(".quantity").find("input.qty").val(),10)>0&&"both"!==a&&"default"!==a&&(jQuery(this).parent().siblings(".quantity").find("input.qty").val(parseInt(jQuery(this).parent().siblings(".quantity").find("input.qty").val(),10)-1),jQuery('input[name="update_cart"]').removeAttr("disabled"),1>jQuery(this).parent().siblings(".quantity").find("input.qty").val()?(jQuery(".single_add_to_cart_button").css("pointer-events","none"),jQuery(".single_add_to_cart_button").css("opacity","0.5")):jQuery(".single_add_to_cart_button").removeAttr("style"))}),jQuery(document).on("keyup change blur","input.qty",function(){1>jQuery(this).val()?(jQuery(".single_add_to_cart_button").css("pointer-events","none"),jQuery(".single_add_to_cart_button").css("opacity","0.5")):jQuery(".single_add_to_cart_button").removeAttr("style")}),n.find("input.qty").keyup(function(){jQuery(this).val()>i&&jQuery(this).val(i)}),"yes"!==t.find(".tmpcoder-product-add-to-cart").data("ajax-add-to-cart")||e('div[data-elementor-type="tmpcoder-theme-builder"]').hasClass("product-type-external")||t.find(".single_add_to_cart_button").on("click",function n(i){i.preventDefault();let a=e(this).closest("form");var o=a.closest(".variations_form");let r=a.hasClass("grouped_form");if(!a[0].checkValidity())return a[0].reportValidity(),!1;let d=e(this),s=d.val()||"",c=a.serialize();if(r){let l=!1;if(t.find(".woocommerce-grouped-product-list-item__quantity").find("input").each(function(){e(this).val()>0&&(l=!0)}),!l){alert(tmpcoder_plugin_script.chooseQuantityText);return}}e.ajax({type:"POST",url:tmpcoder_plugin_script.ajax_url,data:"action=tmpcoder_add_cart_single_product&add-to-cart="+s+"&"+c,beforeSend:function(){!(o.length>0&&!o.find(".variations select").val()||d.hasClass("disabled"))&&d.removeClass("added").addClass("loading")},complete:function(){!(o.length>0&&!o.find(".variations select").val()||d.hasClass("disabled"))&&d.addClass("added").removeClass("loading")},success:function(n){if(n.notices&&n.notices.length>0&&("wc_low_stock"===n.notices[0].type?alert("Only "+n.notices[0].message+" left in stock!"):alert(n.notices[0].message)),n.error&&n.product_url){window.location=n.product_url;return}if("undefined"==typeof wc_add_to_cart_params)return!1;!(o.length>0&&!o.find(".variations select").val()||d.hasClass("disabled"))&&(e(document.body).trigger("wc_fragment_refresh"),e(document.body).trigger("added_to_cart",[n.fragments,n.cart_hash,d]),setTimeout(function(){d.removeClass("added");var n=parseInt(e(".tmpcoder-mini-cart-icon-count").text()),i=parseInt(t.find(".tmpcoder-quantity-wrapper .qty").val());e(".tmpcoder-mini-cart-icon-count").text(n+i),e(".refresh-tmpcoder-cart-qty").length>0&&(e(".tmpcoder-cart-total .tmpcoder-total-qty").text(e(".refresh-tmpcoder-cart-qty").val()),e(".tmpcoder-cart-popup .tmpcoder-cart-popup-count").text(e(".refresh-tmpcoder-cart-qty").val())),e(".refresh-tmpcoder-cart-total").length>0&&e(".tmpcoder-cart-total .woocommerce-Price-amount").replaceWith(e(".refresh-tmpcoder-cart-total .woocommerce-Price-amount").clone())},200))}})})};t(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/tmpcoder-woo-add-to-cart.default",e)})}(jQuery);